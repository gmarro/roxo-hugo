{{ define "main" }}
<section class="site-contact">
  <div class="container">
    <div class="row">
      <div class="col-12" id="message-alert">
      </div>
    </div>
    <div class="row">
      <div class="col-lg-5">
        <h1 class="site-contact-title">
          {{ .Params.heading | safeHTML }}
        </h1>
      </div>
      <div class="col-lg-6 ml-auto">
        <div class="site-contact-form">
          <h4>{{ .Params.form_heading }}</h4>
          <form id="contact-form" action="{{ .Site.Params.fabform }}" method="post">
            <div class="row">
              <div class="col-lg-6">
                <input type="text" class="form-control" name="first-name" id="first-name" placeholder="{{ .Site.Params.contactForm.placeholder_first_name }}" required>
              </div>
              <div class="col-lg-6">
                <input type="text" class="form-control" name="last-name" id="last-name" placeholder="{{ .Site.Params.contactForm.placeholder_last_name }}" required>
              </div>
              <div class="col-lg-6">
                <input type="email" class="form-control" name="email" id="email" placeholder="{{ .Site.Params.contactForm.placeholder_email }}" required>
              </div>
              <div class="col-lg-6">
                <input type="phone" class="form-control" name="phone" id="phone" placeholder="{{ .Site.Params.contactForm.placeholder_phone }}">
              </div>
              <div class="col-lg-6">
                <input type="text" class="form-control" name="company" id="company" placeholder="{{ .Site.Params.contactForm.placeholder_company }}" required>
              </div>
              <div class="col-lg-6">
                <div class="select-wrapper">
                  <select class="form-control" id="projectType" name="project-type" required>
                    <option value="" selected disabled hidden>{{ .Site.Params.contactForm.placeholder_project_type }}</option>
                    {{ range .Site.Params.contactForm.projectType }}
                    <option value="{{ .value }}">{{ .title }}</option>
                    {{ end }}
                  </select>
                </div>
              </div>
              <div class="col-12">
                <textarea class="form-control" id="aboutProject" name="about-project" rows="6" placeholder="{{ .Site.Params.contactForm.placeholder_content }}"></textarea>
              </div>
              <div class="col-12">
                <button formtarget="_blank" type="submit" class="btn btn-primary" id="contact-form-button">
                  <span class="btn-area">
                    <span data-text="{{ .Site.Params.contactForm.send_message }}">
                      {{ .Site.Params.contactForm.send_message }}
                    </span>
                  </span>
                </button>
              </div>
              <p id="contact-form-status"></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script>
    var searchUrl = window.location.search
    console.log(searchUrl)
    if (searchUrl === "?formSuccess") {
      const fragment = document.createDocumentFragment();
      const alertDiv = fragment.appendChild(document.createElement("div"));
      alertDiv.textContent = "Message envoyé avec succès, nous revenons rapidement vers vous.";
      alertDiv.className = "alert alert-success";

      document.getElementById("message-alert").appendChild(fragment);
    }
  </script>
</section>
{{ end }}
